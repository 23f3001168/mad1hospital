<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Patient Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background: #f4f6fb; }
        .card-box { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 14px rgba(0,0,0,0.1); }
        h3 { font-weight: 700; }
        .section-title { font-size: 1.2rem; font-weight: 600; margin-top: 25px; }
    </style>

</head>

<body>

<div class="container mt-4">

    <div class="card-box">

        <h3>Welcome, {{ patient.user.fname }} {{ patient.user.lname }}</h3>
        <p class="text-muted">Age: {{ patient.age }} | Gender: {{ patient.gender }}</p>

        <div class="d-flex gap-2 mt-3">
            <a href="/appointment/book" class="btn btn-primary">Book Appointment</a>
            <a href="/patient/appointments" class="btn btn-outline-primary">Your Appointments</a>
            <a href="/patient/edit" class="btn btn-outline-secondary">Edit Profile</a>
        </div>

        <hr class="my-4">

        <div class="section-title">Departments</div>

        <div class="row mt-2">
            {% for d in depts %}
            <div class="col-md-4 mt-2">
                <div class="card p-3">
                    <h5>{{ d.name }}</h5>
                    <p class="text-muted">{{ d.desc }}</p>
                </div>
            </div>
            {% endfor %}
        </div>

        <hr class="my-4">

        <div class="section-title">Doctors Availability (Next 7 Days)</div>

        {% if availability %}
            <ul class="list-group mt-2">
                {% for a in availability %}
                <li class="list-group-item">
                    <strong>{{ a.date }}:</strong>  
                    Dr. {{ a.doctor.user.fname }} {{ a.doctor.user.lname }}  
                    ({{ a.start_time }} - {{ a.end_time }})
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">No availability added by doctors yet.</p>
        {% endif %}

        <hr class="my-4">

        <a href="/logout" class="btn btn-danger w-100">Logout</a>

    </div>

</div>

</body>
</html>